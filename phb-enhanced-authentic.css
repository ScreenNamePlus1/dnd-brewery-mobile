/* Enhanced D&D PHB CSS - Fixed Version with Proper Colors & Two-Column Layout */

/* Import D&D-appropriate fonts */
@import url('https://fonts.googleapis.com/css2?family=Cinzel:wght@400;600&family=Cinzel+Decorative:wght@700&family=Cormorant+Garamond:wght@400;600&display=swap');

/* Core D&D Color Variables */
:root {
    --phb-burgundy: #58180D;
    --phb-gold: #c9ad6a;
    --phb-cream: #fdf1dc;
    --phb-dark-cream: #f4e5d0;
    --phb-brown: #8B7562;
    --phb-dark-brown: #722F37;
    --phb-light-gold: #e8d5a3;
    --phb-shadow: rgba(0, 0, 0, 0.3);
    --phb-text-shadow: rgba(255, 255, 255, 0.8);
}

/* Base Page Layout - Authentic PHB Style */
.markdown-preview-view {
    max-width: 8.5in !important;
    margin: 0 auto !important;
    padding: 0.75in !important;
    background: 
        linear-gradient(135deg, #fdf1dc 0%, #f8f0dc 25%, #f4e5d0 75%, #f0dcc0 100%),
        radial-gradient(circle at 70% 30%, rgba(139, 117, 94, 0.05) 0%, transparent 50%),
        repeating-linear-gradient(45deg, transparent, transparent 2px, rgba(139, 117, 94, 0.02) 2px, rgba(139, 117, 94, 0.02) 4px) !important;
    box-shadow: 0 0 30px rgba(0, 0, 0, 0.2) !important;
    min-height: 10.5in !important;
    position: relative !important;
    font-family: "Cormorant Garamond", "Georgia", serif !important;
    font-size: 11pt !important;
    line-height: 1.5 !important;
    color: #000 !important; /* FIXED: Ensure black text */
}

/* Force ALL text to be black - This fixes your gray text issue */
.markdown-preview-view * {
    color: #000 !important;
}

/* Special text colors for specific elements */
h1, h2, h3, h4, h5, h6 {
    color: var(--phb-burgundy) !important;
}

/* Two-Column Layout - AUTOMATIC for PHB look */
.markdown-preview-view > div {
    columns: 2 !important;
    column-gap: 0.375in !important; /* Standard PHB column gap */
    column-fill: auto !important;
    column-rule: 1px solid var(--phb-gold) !important;
    text-align: justify !important;
}

/* Break out of columns for certain elements */
h1, .stat-block, .spell, .wide-content, table {
    column-span: all !important;
    margin: 1.5em 0 !important;
}

/* Chapter Titles */
h1 {
    font-family: "Cinzel Decorative", serif !important;
    font-size: 28pt !important;
    text-align: center !important;
    color: var(--phb-burgundy) !important;
    margin: 0.5in 0 0.25in 0 !important;
    padding: 0.5em 0 !important;
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1) !important;
    page-break-before: always !important;
    position: relative !important;
    border-bottom: 4px double var(--phb-gold) !important;
}

h1::after {
    content: "❦ ⚜ ❦" !important;
    display: block !important;
    font-size: 14pt !important;
    color: var(--phb-gold) !important;
    margin-top: 0.25em !important;
    letter-spacing: 0.2em !important;
}

/* Section Headers */
h2 {
    font-family: "Cinzel", serif !important;
    font-size: 16pt !important;
    color: var(--phb-burgundy) !important;
    margin: 0.75em 0 0.5em 0 !important;
    padding: 0.25em 0 !important;
    border-bottom: 2px solid var(--phb-gold) !important;
    text-shadow: 1px 1px 2px rgba(255, 255, 255, 0.8) !important;
}

/* Subsection Headers */
h3 {
    font-family: "Cinzel", serif !important;
    font-size: 13pt !important;
    color: var(--phb-burgundy) !important;
    margin: 0.5em 0 0.25em 0 !important;
    border-bottom: 1px solid var(--phb-brown) !important;
}

/* Feature/Ability Headers */
h4 {
    font-family: "Cormorant Garamond", serif !important;
    font-style: italic !important;
    font-weight: 600 !important;
    font-size: 12pt !important;
    color: var(--phb-brown) !important;
    margin: 0.4em 0 0.2em 0 !important;
}

/* Drop Cap Styling */
.drop-cap::first-letter {
    float: left !important;
    font-family: "Cinzel Decorative", serif !important;
    font-size: 4.5em !important;
    line-height: 0.8 !important;
    padding: 0.1em 0.1em 0 0 !important;
    margin: 0.05em 0.1em 0 0 !important;
    color: var(--phb-burgundy) !important;
    text-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1) !important;
}

/* Stat Blocks - Authentic PHB Style */
.stat-block {
    background: 
        linear-gradient(135deg, #faf5eb 0%, #f5f0e6 50%, #f0ebe1 100%),
        radial-gradient(circle at 60% 40%, rgba(139, 117, 94, 0.08) 0%, transparent 50%) !important;
    border: 3px solid var(--phb-burgundy) !important;
    border-radius: 8px !important;
    padding: 1em !important;
    margin: 1.5em 0 !important;
    box-shadow: 
        0 4px 8px rgba(0, 0, 0, 0.15),
        inset 0 1px 0 rgba(255, 255, 255, 0.8) !important;
    page-break-inside: avoid !important;
    column-span: all !important;
}

.stat-block h4 {
    font-family: "Cinzel", serif !important;
    text-align: center !important;
    color: var(--phb-burgundy) !important;
    font-size: 14pt !important;
    margin: -0.5em -0.5em 0.5em -0.5em !important;
    padding: 0.5em !important;
    background: linear-gradient(90deg, rgba(255, 255, 255, 0.3), rgba(255, 248, 230, 0.6), rgba(255, 255, 255, 0.3)) !important;
    border-bottom: 2px solid var(--phb-gold) !important;
    border-radius: 5px 5px 0 0 !important;
}

/* Spell Blocks */
.spell {
    background: 
        linear-gradient(135deg, rgba(248, 245, 255, 0.95) 0%, rgba(240, 235, 250, 0.95) 100%),
        radial-gradient(circle at 30% 70%, rgba(75, 0, 130, 0.06) 0%, transparent 50%) !important;
    border: 2px solid #8A2BE2 !important;
    border-radius: 8px !important;
    padding: 1em !important;
    margin: 1em 0 !important;
    page-break-inside: avoid !important;
}

.spell-title {
    font-family: "Cinzel", serif !important;
    font-weight: 600 !important;
    color: #4B0082 !important;
    font-size: 12pt !important;
    margin: 0 0 0.5em 0 !important;
}

/* Feature Blocks */
.feature {
    background: rgba(255, 248, 235, 0.8) !important;
    border-left: 4px solid var(--phb-gold) !important;
    padding: 0.75em !important;
    margin: 1em 0 !important;
    border-radius: 0 4px 4px 0 !important;
}

.feature-title {
    font-family: "Cormorant Garamond", serif !important;
    font-weight: 600 !important;
    font-style: italic !important;
    color: var(--phb-brown) !important;
    font-size: 11pt !important;
    margin: 0 0 0.5em 0 !important;
}

/* Magic Item Blocks */
.magic-item {
    background: 
        linear-gradient(135deg, rgba(255, 245, 255, 0.95) 0%, rgba(248, 240, 248, 0.95) 100%),
        radial-gradient(circle at 50% 50%, rgba(138, 43, 226, 0.08) 0%, transparent 50%) !important;
    border: 2px solid #9932CC !important;
    border-radius: 8px !important;
    padding: 1em !important;
    margin: 1em 0 !important;
    page-break-inside: avoid !important;
}

.magic-item-title {
    font-family: "Cinzel", serif !important;
    font-weight: 600 !important;
    color: #8B008B !important;
    font-size: 12pt !important;
    margin: 0 0 0.5em 0 !important;
}

/* Tables - Authentic PHB Styling */
table {
    width: 100% !important;
    margin: 1em 0 !important;
    border-collapse: separate !important;
    border-spacing: 0 !important;
    background: linear-gradient(135deg, #faf8f3 0%, #f5f3ee 100%) !important;
    border: 2px solid var(--phb-burgundy) !important;
    border-radius: 6px !important;
    overflow: hidden !important;
    column-span: all !important;
}

th {
    background: linear-gradient(180deg, #f4b942 0%, #d4841f 100%) !important;
    color: #fff !important;
    font-family: "Cinzel", serif !important;
    font-weight: 600 !important;
    text-align: center !important;
    padding: 0.5em !important;
    text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5) !important;
}

td {
    padding: 0.4em !important;
    border-bottom: 1px solid #e0d5c7 !important;
    color: #000 !important;
}

tr:nth-child(even) td {
    background: rgba(255, 248, 235, 0.5) !important;
}

/* Blockquotes - Flavor Text */
blockquote {
    background: rgba(255, 248, 235, 0.6) !important;
    border-left: 4px solid var(--phb-gold) !important;
    margin: 1em 0 !important;
    padding: 0.75em !important;
    font-style: italic !important;
    color: #2c2c2c !important;
    border-radius: 0 4px 4px 0 !important;
    position: relative !important;
}

blockquote::before {
    content: """ !important;
    font-size: 2em !important;
    color: var(--phb-gold) !important;
    position: absolute !important;
    top: -0.2em !important;
    left: 0.2em !important;
}

/* Lists */
ul, ol {
    margin: 0.5em 0 !important;
    padding-left: 1.2em !important;
}

li {
    margin: 0.25em 0 !important;
    color: #000 !important;
}

/* Page Breaks */
.page-break {
    page-break-before: always !important;
    break-before: page !important;
    column-span: all !important;
}

/* Wide Content (breaks columns) */
.wide, .wide-content {
    column-span: all !important;
    margin: 1em 0 !important;
}

/* Note boxes */
.note {
    background: rgba(240, 248, 255, 0.8) !important;
    border: 1px solid #87CEEB !important;
    border-radius: 4px !important;
    padding: 0.75em !important;
    margin: 1em 0 !important;
    color: #000 !important;
}

/* Print Optimizations */
@media print {
    @page {
        size: 8.5in 11in !important;
        margin: 0.75in !important;
        background: #fdf1dc !important;
    }
    
    .markdown-preview-view {
        box-shadow: none !important;
        max-width: 100% !important;
        margin: 0 !important;
        padding: 0 !important;
    }
    
    /* Ensure colors print */
    * {
        -webkit-print-color-adjust: exact !important;
        print-color-adjust: exact !important;
        color-adjust: exact !important;
    }
    
    /* Page numbers */
    @page :right {
        @bottom-right {
            content: counter(page);
            font-family: "Cinzel", serif;
            color: var(--phb-burgundy);
        }
    }
}

/* Mobile Responsiveness - Single Column on Small Screens */
@media screen and (max-width: 768px) {
    .markdown-preview-view > div {
        columns: 1 !important;
        column-rule: none !important;
    }
    
    .markdown-preview-view {
        max-width: 100% !important;
        padding: 0.5in 0.25in !important;
        font-size: 12pt !important;
    }
    
    h1 {
        font-size: 24pt !important;
        margin: 0.25in 0 !important;
    }
    
    .drop-cap::first-letter {
        font-size: 3.5em !important;
    }
}

/* Very Small Screens */
@media screen and (max-width: 480px) {
    .markdown-preview-view {
        padding: 0.25in !important;
        font-size: 11pt !important;
    }
    
    h1 {
        font-size: 20pt !important;
    }
    
    h2 {
        font-size: 14pt !important;
    }
}
