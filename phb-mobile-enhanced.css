/* D&D 5e PHB Style - Enhanced Authentic Mobile Version */
/* This pushes mobile CSS to its limits while maintaining performance */

/* Import authentic-looking fonts */
@import url('https://fonts.googleapis.com/css2?family=Libre+Baskerville:ital,wght@0,400;0,700;1,400&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Cinzel:wght@400;500;600;700&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Cinzel+Decorative:wght@400;700;900&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Cormorant+Garamond:ital,wght@0,300;0,400;0,500;0,600;0,700;1,400;1,500;1,600&display=swap');

/* CSS Variables for easy theming */
:root {
    --phb-burgundy: #58180D;
    --phb-gold: #c9ad6a;
    --phb-cream: #fdf1dc;
    --phb-dark-cream: #f4e5d0;
    --phb-brown: #8B7562;
    --phb-dark-brown: #722F37;
    --phb-light-gold: #e8d5a3;
    --phb-shadow: rgba(0, 0, 0, 0.3);
    --phb-text-shadow: rgba(255, 255, 255, 0.8);
}

/* FORCE OVERRIDE OBSIDIAN'S DARK THEME */
.app-container,
.workspace,
.workspace-leaf,
.workspace-leaf-content,
.view-content,
.markdown-preview-view,
.markdown-source-view,
.cm-editor,
.cm-content {
    background-color: var(--phb-cream) !important;
    color: #000 !important;
}

/* Enhanced parchment background with more authentic textures */
body,
.app-container {
    background-color: var(--phb-cream) !important;
    background-image: 
        /* Aged paper stains */
        radial-gradient(circle at 15% 20%, rgba(139, 117, 94, 0.12) 0%, transparent 35%),
        radial-gradient(circle at 85% 10%, rgba(139, 117, 94, 0.08) 0%, transparent 40%),
        radial-gradient(circle at 25% 80%, rgba(160, 140, 100, 0.1) 0%, transparent 30%),
        radial-gradient(circle at 75% 75%, rgba(139, 117, 94, 0.06) 0%, transparent 45%),
        /* Coffee ring stains */
        radial-gradient(circle at 60% 30%, rgba(101, 67, 33, 0.03) 0%, rgba(101, 67, 33, 0.05) 40%, transparent 41%),
        radial-gradient(circle at 20% 60%, rgba(101, 67, 33, 0.02) 0%, rgba(101, 67, 33, 0.04) 35%, transparent 36%),
        /* Ink blots */
        radial-gradient(ellipse at 40% 90%, rgba(88, 24, 13, 0.04) 0%, transparent 15%),
        radial-gradient(ellipse at 90% 40%, rgba(88, 24, 13, 0.03) 0%, transparent 20%),
        /* Fine paper grain */
        repeating-linear-gradient(
            0deg,
            transparent,
            transparent 1px,
            rgba(139, 117, 94, 0.015) 1px,
            rgba(139, 117, 94, 0.015) 2px
        ),
        repeating-linear-gradient(
            90deg,
            transparent,
            transparent 1px,
            rgba(139, 117, 94, 0.015) 1px,
            rgba(139, 117, 94, 0.015) 2px
        ),
        /* Diagonal texture */
        repeating-linear-gradient(
            45deg,
            transparent,
            transparent 3px,
            rgba(139, 117, 94, 0.008) 3px,
            rgba(139, 117, 94, 0.008) 6px
        ) !important;
    color: #000 !important;
}

/* Force the reading view to have parchment background */
.markdown-preview-view {
    background: transparent !important;
    padding: 2.5em !important;
    position: relative !important;
}

/* Add decorative border to the entire document */
.markdown-preview-view::before {
    content: "" !important;
    position: absolute !important;
    top: 1em !important;
    left: 1em !important;
    right: 1em !important;
    bottom: 1em !important;
    border: 2px solid transparent !important;
    background: linear-gradient(var(--phb-cream), var(--phb-cream)) padding-box,
                linear-gradient(45deg, var(--phb-burgundy), var(--phb-gold), var(--phb-burgundy), var(--phb-gold)) border-box !important;
    border-radius: 12px !important;
    pointer-events: none !important;
    z-index: -1 !important;
}

.markdown-preview-sizer {
    background: transparent !important;
}

/* Override ALL text colors to be dark on light */
.markdown-preview-view,
.markdown-preview-view *,
.cm-editor,
.cm-content,
.cm-content * {
    color: #000 !important;
    background-color: transparent !important;
}

/* Enhanced typography with better font stack */
body {
    font-family: "Cormorant Garamond", "Libre Baskerville", "Crimson Text", "Times New Roman", serif !important;
    font-size: 15px !important;
    line-height: 1.65 !important;
    color: #000 !important;
    -webkit-print-color-adjust: exact;
    print-color-adjust: exact;
    text-rendering: optimizeLegibility !important;
    -webkit-font-smoothing: antialiased !important;
}

/* Enhanced headings with decorative elements */
h1, h2, h3, h4, h5, h6 {
    font-family: "Cinzel", "Libre Baskerville", serif !important;
    font-weight: bold !important;
    color: var(--phb-burgundy) !important;
    background-color: transparent !important;
    text-shadow: 1px 1px 0px var(--phb-text-shadow), 0px 0px 8px rgba(255, 255, 255, 0.3) !important;
    margin-top: 1.8em !important;
    margin-bottom: 0.6em !important;
    position: relative !important;
}

/* Chapter titles with ornate styling */
h1 {
    font-family: "Cinzel Decorative", "Cinzel", serif !important;
    font-size: 2.2em !important;
    text-align: center !important;
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.6) 0%, rgba(255, 248, 230, 0.8) 50%, rgba(255, 255, 255, 0.4) 100%) !important;
    padding: 1em 2em !important;
    border-radius: 15px !important;
    margin: 2em 0 1.5em 0 !important;
    border: 3px solid transparent !important;
    background-clip: padding-box !important;
    position: relative !important;
    box-shadow: 
        0 6px 12px rgba(0, 0, 0, 0.15),
        inset 0 1px 0 rgba(255, 255, 255, 0.8) !important;
}

/* Decorative corners for h1 */
h1::before, h1::after {
    content: "❦" !important;
    font-size: 0.7em !important;
    color: var(--phb-gold) !important;
    position: absolute !important;
    top: 50% !important;
    transform: translateY(-50%) !important;
    text-shadow: 0 0 4px rgba(201, 173, 106, 0.6) !important;
}

h1::before {
    left: 0.5em !important;
}

h1::after {
    right: 0.5em !important;
}

/* Add ornate border to h1 */
h1::after {
    content: "" !important;
    position: absolute !important;
    top: -3px !important;
    left: -3px !important;
    right: -3px !important;
    bottom: -3px !important;
    background: linear-gradient(45deg, var(--phb-burgundy), var(--phb-gold), var(--phb-burgundy), var(--phb-gold)) !important;
    border-radius: 18px !important;
    z-index: -1 !important;
}

/* Section headers with underlines */
h2 {
    font-size: 1.6em !important;
    border-bottom: none !important;
    padding: 0.8em 1em 0.4em 1em !important;
    margin: 2em -1em 1em -1em !important;
    background: linear-gradient(90deg, 
        rgba(255, 248, 230, 0.8) 0%, 
        rgba(255, 252, 240, 0.9) 50%, 
        rgba(255, 248, 230, 0.6) 100%) !important;
    border-radius: 8px !important;
    position: relative !important;
    box-shadow: 0 3px 6px rgba(0, 0, 0, 0.1) !important;
}

/* Gold underline effect for h2 */
h2::after {
    content: "" !important;
    position: absolute !important;
    bottom: 0 !important;
    left: 1em !important;
    right: 1em !important;
    height: 3px !important;
    background: linear-gradient(90deg, transparent 0%, var(--phb-gold) 20%, var(--phb-gold) 80%, transparent 100%) !important;
    border-radius: 2px !important;
}

h3 {
    font-size: 1.35em !important;
    position: relative !important;
}

h3::after {
    content: "" !important;
    position: absolute !important;
    bottom: -3px !important;
    left: 0 !important;
    width: 60% !important;
    height: 1px !important;
    background: linear-gradient(90deg, var(--phb-gold) 0%, transparent 100%) !important;
}

h4 {
    font-size: 1.15em !important;
    font-style: italic !important;
    color: var(--phb-dark-brown) !important;
    position: relative !important;
}

h4::before {
    content: "§ " !important;
    color: var(--phb-gold) !important;
    font-style: normal !important;
    margin-right: 0.3em !important;
}

h5, h6 {
    font-size: 1.05em !important;
    font-style: italic !important;
    color: var(--phb-dark-brown) !important;
}

/* Enhanced paragraph styling */
p {
    color: #000 !important;
    background-color: transparent !important;
    text-align: justify !important;
    text-indent: 1.2em !important;
    margin: 0.9em 0 !important;
    line-height: 1.65 !important;
    hyphens: auto !important;
    -webkit-hyphens: auto !important;
}

/* Remove indent after headings and special elements */
h1 + p, h2 + p, h3 + p, h4 + p, h5 + p, h6 + p,
.spell + p, .stat-block + p, .feature + p, .note + p {
    text-indent: 0 !important;
}

/* Enhanced lists */
ul, ol {
    color: #000 !important;
    background-color: transparent !important;
    margin: 1.2em 0 !important;
    padding-left: 2.5em !important;
}

ul li {
    position: relative !important;
}

ul li::marker {
    content: "◆ " !important;
    color: var(--phb-gold) !important;
}

ol li::marker {
    color: var(--phb-burgundy) !important;
    font-weight: bold !important;
}

li {
    color: #000 !important;
    background-color: transparent !important;
    margin: 0.4em 0 !important;
    line-height: 1.6 !important;
}

/* Enhanced text styling */
strong, b {
    color: var(--phb-burgundy) !important;
    font-weight: 700 !important;
    background-color: transparent !important;
    text-shadow: 0.5px 0.5px 0px rgba(255, 255, 255, 0.3) !important;
}

em, i {
    color: #000 !important;
    font-style: italic !important;
    background-color: transparent !important;
}

/* ENHANCED BLOCKQUOTES with scroll effects */
blockquote {
    background: 
        linear-gradient(135deg, rgba(255, 248, 230, 0.95) 0%, rgba(250, 240, 210, 0.95) 100%),
        radial-gradient(circle at 10% 20%, rgba(139, 117, 94, 0.1) 0%, transparent 50%) !important;
    border: none !important;
    border-left: 6px solid var(--phb-burgundy) !important;
    border-right: 2px solid var(--phb-gold) !important;
    color: #000 !important;
    padding: 1.5em 2em 1.5em 2.5em !important;
    margin: 2em 0 !important;
    font-style: italic !important;
    font-size: 1.05em !important;
    border-radius: 0 12px 12px 0 !important;
    box-shadow: 
        4px 4px 12px rgba(0, 0, 0, 0.15),
        inset 0 1px 0 rgba(255, 255, 255, 0.8) !important;
    position: relative !important;
}

/* Enhanced decorative quote marks */
blockquote::before {
    content: """ !important;
    font-family: "Cinzel Decorative", serif !important;
    font-size: 4em !important;
    color: rgba(88, 24, 13, 0.2) !important;
    position: absolute !important;
    top: -0.2em !important;
    left: 0.1em !important;
    text-shadow: 2px 2px 4px rgba(201, 173, 106, 0.3) !important;
}

blockquote::after {
    content: """ !important;
    font-family: "Cinzel Decorative", serif !important;
    font-size: 3em !important;
    color: rgba(88, 24, 13, 0.15) !important;
    position: absolute !important;
    bottom: -0.3em !important;
    right: 0.3em !important;
    text-shadow: 2px 2px 4px rgba(201, 173, 106, 0.3) !important;
}

/* Fix blockquote text being white */
blockquote, blockquote * {
    color: #000 !important;
    background-color: transparent !important;
}

/* ENHANCED TABLES with more authentic D&D styling */
table {
    width: 100% !important;
    margin: 2em 0 !important;
    border-collapse: separate !important;
    border-spacing: 0 !important;
    background: linear-gradient(135deg, rgba(255, 252, 245, 0.98) 0%, rgba(250, 245, 235, 0.98) 100%) !important;
    border: 3px solid var(--phb-burgundy) !important;
    border-radius: 12px !important;
    box-shadow: 
        0 6px 16px rgba(0, 0, 0, 0.15),
        inset 0 1px 0 rgba(255, 255, 255, 0.8) !important;
    overflow: hidden !important;
}

th {
    background: linear-gradient(180deg, #f4b942 0%, #e69a28 50%, #d4841f 100%) !important;
    color: #fff !important;
    font-family: "Cinzel", serif !important;
    font-weight: bold !important;
    font-size: 1.1em !important;
    text-align: center !important;
    padding: 1em 0.8em !important;
    border: none !important;
    text-shadow: 
        0px 1px 0px rgba(0, 0, 0, 0.5),
        0px 0px 4px rgba(0, 0, 0, 0.3) !important;
    position: relative !important;
}

/* Add decorative elements to table headers */
th::after {
    content: "" !important;
    position: absolute !important;
    bottom: 0 !important;
    left: 0 !important;
    right: 0 !important;
    height: 2px !important;
    background: linear-gradient(90deg, transparent 0%, rgba(255, 255, 255, 0.3) 50%, transparent 100%) !important;
}

td {
    background-color: transparent !important;
    color: #000 !important;
    padding: 0.8em !important;
    border: 1px solid rgba(201, 173, 106, 0.3) !important;
    vertical-align: top !important;
    font-size: 1.02em !important;
    line-height: 1.5 !important;
}

tr:nth-child(even) td {
    background-color: rgba(255, 248, 235, 0.6) !important;
}

tr:hover td {
    background-color: rgba(255, 245, 220, 0.8) !important;
    transition: background-color 0.2s ease !important;
}

/* Enhanced code styling */
code {
    background-color: rgba(255, 255, 255, 0.9) !important;
    color: var(--phb-burgundy) !important;
    border: 1px solid var(--phb-gold) !important;
    padding: 0.3em 0.5em !important;
    border-radius: 4px !important;
    font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace !important;
    font-size: 0.9em !important;
    box-shadow: inset 0 1px 2px rgba(0, 0, 0, 0.1) !important;
}

pre {
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.95) 0%, rgba(250, 245, 235, 0.95) 100%) !important;
    color: #000 !important;
    border: 2px solid var(--phb-gold) !important;
    padding: 1.5em !important;
    border-radius: 8px !important;
    margin: 2em 0 !important;
    box-shadow: 
        0 4px 8px rgba(0, 0, 0, 0.1),
        inset 0 2px 4px rgba(0, 0, 0, 0.05) !important;
}

pre code {
    background-color: transparent !important;
    border: none !important;
    padding: 0 !important;
    box-shadow: none !important;
}

/* Enhanced links */
a {
    color: var(--phb-burgundy) !important;
    text-decoration: none !important;
    background-color: transparent !important;
    border-bottom: 1px dotted var(--phb-gold) !important;
    transition: all 0.2s ease !important;
}

a:hover {
    color: var(--phb-gold) !important;
    border-bottom: 1px solid var(--phb-gold) !important;
    text-shadow: 0 0 2px rgba(201, 173, 106, 0.5) !important;
}

/* ENHANCED SPECIAL D&D CLASSES */

/* Enhanced spell blocks with magical styling */
.spell, .ability, .feature {
    background: 
        linear-gradient(135deg, rgba(255, 252, 245, 0.95) 0%, rgba(250, 245, 235, 0.95) 50%, rgba(255, 248, 235, 0.95) 100%),
        radial-gradient(circle at 20% 80%, rgba(201, 173, 106, 0.08) 0%, transparent 50%),
        radial-gradient(circle at 80% 20%, rgba(88, 24, 13, 0.05) 0%, transparent 50%) !important;
    border: 3px solid transparent !important;
    background-clip: padding-box !important;
    border-radius: 12px !important;
    padding: 1.5em !important;
    margin: 2em 0 !important;
    box-shadow: 
        0 6px 16px rgba(0, 0, 0, 0.15),
        inset 0 1px 0 rgba(255, 255, 255, 0.8) !important;
    position: relative !important;
}

/* Magical border effect */
.spell::before, .ability::before, .feature::before {
    content: "" !important;
    position: absolute !important;
    top: -3px !important;
    left: -3px !important;
    right: -3px !important;
    bottom: -3px !important;
    background: linear-gradient(45deg, var(--phb-burgundy), var(--phb-gold), var(--phb-burgundy), var(--phb-gold)) !important;
    border-radius: 15px !important;
    z-index: -1 !important;
}

.spell *, .ability *, .feature * {
    color: #000 !important;
    background-color: transparent !important;
}

.spell-title, .ability-title, .feature-title {
    font-family: "Cinzel", serif !important;
    font-weight: bold !important;
    color: var(--phb-burgundy) !important;
    font-size: 1.3em !important;
    margin: 0 0 0.8em 0 !important;
    text-align: center !important;
    padding-bottom: 0.5em !important;
    position: relative !important;
    text-shadow: 1px 1px 2px rgba(255, 255, 255, 0.8) !important;
}

/* Decorative underline for titles */
.spell-title::after, .ability-title::after, .feature-title::after {
    content: "" !important;
    position: absolute !important;
    bottom: 0 !important;
    left: 50% !important;
    transform: translateX(-50%) !important;
    width: 80% !important;
    height: 2px !important;
    background: linear-gradient(90deg, transparent 0%, var(--phb-gold) 20%, var(--phb-gold) 80%, transparent 100%) !important;
    border-radius: 2px !important;
}

/* ENHANCED STAT BLOCKS with ornate styling */
.stat-block {
    background: 
        linear-gradient(135deg, rgba(255, 248, 235, 0.98) 0%, rgba(245, 235, 220, 0.98) 50%, rgba(255, 245, 225, 0.98) 100%),
        radial-gradient(circle at 10% 10%, rgba(139, 117, 94, 0.08) 0%, transparent 40%),
        radial-gradient(circle at 90% 90%, rgba(88, 24, 13, 0.06) 0%, transparent 40%) !important;
    border: 4px solid transparent !important;
    background-clip: padding-box !important;
    border-radius: 16px !important;
    padding: 2em !important;
    margin: 2.5em 0 !important;
    box-shadow: 
        0 8px 20px rgba(0, 0, 0, 0.2),
        inset 0 2px 0 rgba(255, 255, 255, 0.9) !important;
    position: relative !important;
}

/* Ornate border for stat blocks */
.stat-block::before {
    content: "" !important;
    position: absolute !important;
    top: -4px !important;
    left: -4px !important;
    right: -4px !important;
    bottom: -4px !important;
    background: linear-gradient(45deg, 
        var(--phb-burgundy) 0%, 
        var(--phb-gold) 25%, 
        var(--phb-burgundy) 50%, 
        var(--phb-gold) 75%, 
        var(--phb-burgundy) 100%) !important;
    border-radius: 20px !important;
    z-index: -1 !important;
}

.stat-block * {
    color: #000 !important;
    background-color: transparent !important;
}

.stat-block h4 {
    font-family: "Cinzel Decorative", "Cinzel", serif !important;
    text-align: center !important;
    font-size: 1.5em !important;
    margin: 0 0 1em 0 !important;
    padding: 0.5em !important;
    background: linear-gradient(90deg, rgba(255, 255, 255, 0.3) 0%, rgba(255, 248, 230, 0.6) 50%, rgba(255, 255, 255, 0.3) 100%) !important;
    border-radius: 8px !important;
    position: relative !important;
}

/* Decorative elements for creature names */
.stat-block h4::before, .stat-block h4::after {
    content: "⚜" !important;
    color: var(--phb-gold) !important;
    font-size: 0.8em !important;
    position: absolute !important;
    top: 50% !important;
    transform: translateY(-50%) !important;
    text-shadow: 0 0 4px rgba(201, 173, 106, 0.6) !important;
}

.stat-block h4::before {
    left: 0.5em !important;
}

.stat-block h4::after {
    right: 0.5em !important;
}

/* Enhanced notes and sidebars */
.note {
    background: 
        linear-gradient(135deg, rgba(255, 252, 240, 0.95) 0%, rgba(250, 245, 230, 0.95) 100%),
        radial-gradient(circle at 70% 30%, rgba(201, 173, 106, 0.06) 0%, transparent 50%) !important;
    border: 2px solid var(--phb-gold) !important;
    border-radius: 8px !important;
    padding: 1.2em !important;
    margin: 1.5em 0 !important;
    font-size: 0.98em !important;
    box-shadow: 
        0 3px 8px rgba(0, 0, 0, 0.1),
        inset 0 1px 0 rgba(255, 255, 255, 0.8) !important;
    position: relative !important;
}

.note::before {
    content: "💡" !important;
    position: absolute !important;
    top: -8px !important;
    left: 1em !important;
    background-color: var(--phb-cream) !important;
    padding: 0 0.3em !important;
    font-size: 1.2em !important;
}

.note * {
    color: #000 !important;
    background-color: transparent !important;
}

.sidebar {
    background: 
        linear-gradient(135deg, rgba(245, 240, 225, 0.95) 0%, rgba(240, 230, 210, 0.95) 100%),
        radial-gradient(circle at 30% 70%, rgba(88, 24, 13, 0.05) 0%, transparent 50%) !important;
    border: 3px solid var(--phb-burgundy) !important;
    border-radius: 12px !important;
    padding: 1.5em !important;
    margin: 2em 0 !important;
    box-shadow: 
        0 4px 12px rgba(0, 0, 0, 0.15),
        inset 0 1px 0 rgba(255, 255, 255, 0.8) !important;
    position: relative !important;
}

.sidebar::before {
    content: "📜" !important;
    position: absolute !important;
    top: -10px !important;
    right: 1em !important;
    background-color: var(--phb-cream) !important;
    padding: 0 0.3em !important;
    font-size: 1.3em !important;
}

.sidebar * {
    color: #000 !important;
    background-color: transparent !important;
}

/* Enhanced drop caps with magical effects */
.drop-cap::first-letter {
    font-family: "Cinzel Decorative", serif !important;
    font-size: 5em !important;
    font-weight: 900 !important;
    float: left !important;
    line-height: 0.8 !important;
    margin: 0.1em 0.15em 0 0 !important;
    color: var(--phb-burgundy) !important;
    text-shadow: 
        3px 3px 0px rgba(255, 255, 255, 0.8),
        0 0 8px rgba(201, 173, 106, 0.4) !important;
    background: radial-gradient(circle, rgba(201, 173, 106, 0.1) 0%, transparent 70%) !important;
    border-radius: 50% !important;
    padding: 0.1em !important;
}

/* Magic item blocks with enchanted styling */
.magic-item {
    background: 
        linear-gradient(135deg, rgba(255, 250, 240, 0.95) 0%, rgba(248, 240, 225, 0.95) 100%),
        radial-gradient(circle at 60% 40%, rgba(147, 112, 219, 0.06) 0%, transparent 50%),
        radial-gradient(circle at 20% 80%, rgba(201, 173, 106, 0.08) 0%, transparent 50%) !important;
    border: 2px solid transparent !important;
    background-clip: padding-box !important;
    border-radius: 10px !important;
    padding: 1.3em !important;
    margin: 1.8em 0 !important;
    box-shadow: 
        0 4px 12px rgba(0, 0, 0, 0.12),
        inset 0 1px 0 rgba(255, 255, 255, 0.8) !important;
    position: relative !important;
}

.magic-item::before {
    content: "" !important;
    position: absolute !important;
    top: -2px !important;
    left: -2px !important;
    right: -2px !important;
    bottom: -2px !important;
    background: linear-gradient(45deg, var(--phb-burgundy), #9370db, var(--phb-gold), #9370db) !important;
    border-radius: 12px !important;
    z-index: -1 !important;
}

.magic-item-title {
    font-family: "Cinzel", serif !important;
    font-weight: bold !important;
    color: #4b0082 !important;
    font-size: 1.2em !important;
    text-align: center !important;
    margin: 0 0 0.6em 0 !important;
    text-shadow: 1px 1px 2px rgba(255, 255, 255, 0.8) !important;
}

.magic-item * {
    color: #000 !important;
    background-color: transparent !important;
}

/* Enhanced horizontal rules with decorative elements */
hr {
    border: none !important;
    height: 6px !important;
    margin: 3em 0 !important;
    background: linear-gradient(90deg, 
        transparent 0%, 
        var(--phb-gold) 10%, 
        var(--phb-burgundy) 30%, 
        var(--phb-gold) 50%, 
        var(--phb-burgundy) 70%, 
        var(--phb-gold) 90%, 
        transparent 100%) !important;
    border-radius: 3px !important;
    position: relative !important;
}

hr::before, hr::after {
    content: "❦" !important;
    position: absolute !important;
    top: 50% !important;
    transform: translateY(-50%) !important;
    color: var(--phb-gold) !important;
    font-size: 1.5em !important;
    background-color: var(--phb-cream) !important;
    padding: 0 0.3em !important;
    text-shadow: 0 0 4px rgba(201, 173, 106, 0.6) !important;
}

hr::before {
    left: 20% !important;
}

hr::after {
    right: 20% !important;
}

/* Two-column layout for larger screens */
.two-column {
    columns: 2 !important;
    column-gap: 2em !important;
    column-rule: 1px solid var(--phb-gold) !important;
    margin: 2em 0 !important;
}

.two-column * {
    break-inside: avoid !important;
}

/* Page breaks for printing */
.page-break {
    page-break-before: always !important;
    break-before: page !important;
    margin-top: 2em !important;
    border-top: 3px double var(--phb-gold) !important;
    padding-top: 1em !important;
}

.no-break {
    page-break-inside: avoid !important;
    break-inside: avoid !important;
}

/* Wide tables that break column layouts */
.wide {
    width: 100% !important;
    margin: 2em 0 !important;
    column-span: all !important;
    -webkit-column-span: all !important;
}

/* No-print elements */
.no-print {
    display: block !important;
}

/* Enhanced print styles */
@media print {
    body, .app-container, .workspace, .markdown-preview-view {
        background-color: var(--phb-cream) !important;
        color: #000 !important;
        font-size: 11pt !important;
        line-height: 1.4 !important;
    }
    
    .no-print {
        display: none !important;
    }
    
    /* Ensure backgrounds print */
    * {
        -webkit-print-color-adjust: exact !important;
        print-color-adjust: exact !important;
    }
    
    /* Page margins for book-like appearance */
    @page {
        margin: 0.75in !important;
        background-color: var(--phb-cream) !important;
    }
    
    /* Prevent breaks in special elements */
    .spell, .stat-block, .feature, .magic-item, .note, .sidebar {
        page-break-inside: avoid !important;
        break-inside: avoid !important;
    }
    
    /* Ensure headings stay with following content */
    h1, h2, h3, h4, h5, h6 {
        page-break-after: avoid !important;
        break-after: avoid !important;
    }
    
    /* Table printing optimization */
    table {
        page-break-inside: avoid !important;
        break-inside: avoid !important;
    }
    
    tr {
        page-break-inside: avoid !important;
        break-inside: avoid !important;
    }
}

/* Mobile responsive design */
@media screen and (max-width: 768px) {
    body {
        font-size: 16px !important;
        line-height: 1.7 !important;
    }
    
    .markdown-preview-view {
        padding: 1.5em !important;
    }
    
    .markdown-preview-view::before {
        top: 0.5em !important;
        left: 0.5em !important;
        right: 0.5em !important;
        bottom: 0.5em !important;
    }
    
    h1 {
        font-size: 1.9em !important;
        padding: 0.8em 1em !important;
    }
    
    h1::before, h1::after {
        font-size: 0.6em !important;
    }
    
    h2 {
        font-size: 1.5em !important;
        padding: 0.6em 0.8em 0.3em 0.8em !important;
        margin: 1.5em -0.8em 0.8em -0.8em !important;
    }
    
    h3 {
        font-size: 1.3em !important;
    }
    
    h4 {
        font-size: 1.1em !important;
    }
    
    /* Mobile-optimized special blocks */
    .spell, .stat-block, .feature, .magic-item {
        padding: 1.2em !important;
        margin: 1.5em 0 !important;
    }
    
    .spell-title, .ability-title, .feature-title {
        font-size: 1.2em !important;
    }
    
    .stat-block h4 {
        font-size: 1.3em !important;
    }
    
    .stat-block h4::before, .stat-block h4::after {
        font-size: 0.7em !important;
    }
    
    /* Mobile table adjustments */
    table {
        font-size: 0.9em !important;
        margin: 1.5em -0.5em !important;
        width: calc(100% + 1em) !important;
    }
    
    th {
        padding: 0.8em 0.5em !important;
        font-size: 1em !important;
    }
    
    td {
        padding: 0.6em 0.5em !important;
    }
    
    /* Mobile drop cap adjustment */
    .drop-cap::first-letter {
        font-size: 4em !important;
        margin: 0.05em 0.1em 0 0 !important;
    }
    
    /* Disable two-column on mobile */
    .two-column {
        columns: 1 !important;
        column-rule: none !important;
    }
    
    /* Mobile blockquote adjustments */
    blockquote {
        padding: 1.2em 1.5em 1.2em 2em !important;
        margin: 1.5em 0 !important;
        font-size: 1.02em !important;
    }
    
    blockquote::before {
        font-size: 3.5em !important;
        left: 0.2em !important;
    }
    
    blockquote::after {
        font-size: 2.5em !important;
        right: 0.2em !important;
    }
}

/* Very small screens (phones in portrait) */
@media screen and (max-width: 480px) {
    .markdown-preview-view {
        padding: 1em !important;
    }
    
    body {
        font-size: 15px !important;
    }
    
    h1 {
        font-size: 1.7em !important;
        padding: 0.6em 0.8em !important;
    }
    
    h2 {
        font-size: 1.4em !important;
    }
    
    .spell, .stat-block, .feature, .magic-item, .note, .sidebar {
        padding: 1em !important;
        margin: 1.2em 0 !important;
    }
    
    table {
        font-size: 0.85em !important;
    }
    
    .drop-cap::first-letter {
        font-size: 3.5em !important;
    }
}

/* High-DPI display optimizations */
@media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
    body {
        text-rendering: optimizeLegibility !important;
        -webkit-font-smoothing: antialiased !important;
        -moz-osx-font-smoothing: grayscale !important;
    }
}

/* Dark mode override (just in case) */
@media (prefers-color-scheme: dark) {
    .app-container,
    .workspace,
    .markdown-preview-view {
        background-color: var(--phb-cream) !important;
        color: #000 !important;
    }
}

/* Animation for interactive elements */
@keyframes gentle-glow {
    0%, 100% { 
        text-shadow: 1px 1px 0px var(--phb-text-shadow), 0px 0px 8px rgba(255, 255, 255, 0.3) !important; 
    }
    50% { 
        text-shadow: 1px 1px 0px var(--phb-text-shadow), 0px 0px 12px rgba(201, 173, 106, 0.4) !important; 
    }
}

/* Subtle animation for headings on hover */
h1:hover, h2:hover, h3:hover {
    animation: gentle-glow 2s ease-in-out infinite !important;
}

/* Enhanced focus styles for accessibility */
a:focus, button:focus {
    outline: 2px solid var(--phb-gold) !important;
    outline-offset: 2px !important;
    background-color: rgba(201, 173, 106, 0.1) !important;
}
