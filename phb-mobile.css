/* D&D 5e PHB Style - Fixed for Obsidian Dark Theme Override */
/* This CSS forces the parchment look even in dark mode */

/* Import fonts */
@import url('https://fonts.googleapis.com/css2?family=Libre+Baskerville:ital,wght@0,400;0,700;1,400&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Cinzel:wght@400;500;600;700&display=swap');

/* FORCE OVERRIDE OBSIDIAN'S DARK THEME */
.app-container,
.workspace,
.workspace-leaf,
.workspace-leaf-content,
.view-content,
.markdown-preview-view,
.markdown-source-view,
.cm-editor,
.cm-content {
    background-color: #fdf1dc !important;
    color: #000 !important;
}

/* Override the main content area completely */
body,
.app-container {
    background-color: #fdf1dc !important;
    background-image: 
        /* Parchment texture using gradients */
        radial-gradient(circle at 25% 25%, rgba(139, 117, 94, 0.08) 0%, transparent 50%),
        radial-gradient(circle at 75% 75%, rgba(139, 117, 94, 0.08) 0%, transparent 50%),
        radial-gradient(circle at 50% 50%, rgba(160, 140, 100, 0.03) 0%, transparent 30%),
        /* Subtle aging marks */
        radial-gradient(ellipse at 20% 10%, rgba(139, 117, 94, 0.1) 0%, transparent 20%),
        radial-gradient(ellipse at 80% 90%, rgba(139, 117, 94, 0.1) 0%, transparent 20%),
        /* Fine grain texture */
        repeating-linear-gradient(
            45deg,
            transparent,
            transparent 2px,
            rgba(139, 117, 94, 0.02) 2px,
            rgba(139, 117, 94, 0.02) 4px
        ) !important;
    color: #000 !important;
}

/* Force the reading view to have parchment background */
.markdown-preview-view {
    background: transparent !important;
    padding: 2em !important;
}

.markdown-preview-sizer {
    background: transparent !important;
}

/* Override ALL text colors to be dark on light */
.markdown-preview-view,
.markdown-preview-view *,
.cm-editor,
.cm-content,
.cm-content * {
    color: #000 !important;
    background-color: transparent !important;
}

/* Base typography - force dark text */
body {
    font-family: "Libre Baskerville", "Times New Roman", serif !important;
    font-size: 14px !important;
    line-height: 1.6 !important;
    color: #000 !important;
    -webkit-print-color-adjust: exact;
    print-color-adjust: exact;
}

/* Headings - D&D style with proper colors */
h1, h2, h3, h4, h5, h6 {
    font-family: Cinzel, "Libre Baskerville", serif !important;
    font-weight: bold !important;
    color: #58180D !important;
    background-color: transparent !important;
    text-shadow: 1px 1px 0px rgba(255, 255, 255, 0.8) !important;
    margin-top: 1.5em !important;
    margin-bottom: 0.5em !important;
}

h1 {
    font-size: 2em !important;
    border-bottom: 3px solid #58180D !important;
    padding-bottom: 0.3em !important;
    text-align: center !important;
    background: linear-gradient(90deg, rgba(255, 255, 255, 0.4) 0%, rgba(255, 255, 255, 0.1) 100%) !important;
    padding: 0.5em !important;
    border-radius: 8px !important;
    margin-bottom: 1em !important;
}

h2 {
    font-size: 1.5em !important;
    border-bottom: 2px solid #c9ad6a !important;
    padding-bottom: 0.2em !important;
    background: linear-gradient(90deg, rgba(255, 255, 255, 0.3) 0%, transparent 100%) !important;
    padding-left: 0.5em !important;
    margin-left: -0.5em !important;
}

h3 {
    font-size: 1.25em !important;
    border-bottom: 1px solid #c9ad6a !important;
    padding-bottom: 0.1em !important;
}

h4 {
    font-size: 1.1em !important;
    font-style: italic !important;
    color: #722F37 !important;
}

h5, h6 {
    font-size: 1em !important;
    font-style: italic !important;
    color: #722F37 !important;
}

/* Paragraphs - remove any background, ensure dark text */
p {
    color: #000 !important;
    background-color: transparent !important;
    text-align: justify !important;
    text-indent: 1em !important;
    margin: 0.8em 0 !important;
    line-height: 1.6 !important;
}

/* Remove indent after headings */
h1 + p, h2 + p, h3 + p, h4 + p, h5 + p, h6 + p {
    text-indent: 0 !important;
}

/* Lists - force dark text */
ul, ol {
    color: #000 !important;
    background-color: transparent !important;
    margin: 1em 0 !important;
    padding-left: 2em !important;
}

li {
    color: #000 !important;
    background-color: transparent !important;
    margin: 0.3em 0 !important;
}

/* Strong/bold text */
strong, b {
    color: #58180D !important;
    font-weight: bold !important;
    background-color: transparent !important;
}

/* Italic text */
em, i {
    color: #000 !important;
    font-style: italic !important;
    background-color: transparent !important;
}

/* BLOCKQUOTES - Fix the white text on light background issue */
blockquote {
    background-color: rgba(240, 230, 210, 0.8) !important;
    border-left: 4px solid #58180D !important;
    color: #000 !important;
    padding: 1em 1.5em !important;
    margin: 1.5em 0 !important;
    font-style: italic !important;
    border-radius: 0 8px 8px 0 !important;
    box-shadow: 2px 2px 6px rgba(0, 0, 0, 0.1) !important;
    position: relative !important;
}

/* Fix blockquote text being white */
blockquote, blockquote * {
    color: #000 !important;
    background-color: transparent !important;
}

blockquote::before {
    content: '"' !important;
    font-size: 3em !important;
    color: rgba(88, 24, 13, 0.3) !important;
    position: absolute !important;
    top: -0.1em !important;
    left: 0.3em !important;
    font-family: serif !important;
}

/* Tables - D&D style */
table {
    width: 100% !important;
    margin: 1.5em 0 !important;
    border-collapse: separate !important;
    border-spacing: 0 !important;
    background-color: rgba(255, 250, 240, 0.95) !important;
    border: 2px solid #58180D !important;
    border-radius: 8px !important;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1) !important;
}

th {
    background: linear-gradient(180deg, #e69a28 0%, #d4841f 100%) !important;
    color: #fff !important;
    font-weight: bold !important;
    text-align: center !important;
    padding: 0.6em !important;
    border: 1px solid #58180D !important;
    text-shadow: 0px 1px 0px rgba(0, 0, 0, 0.3) !important;
}

td {
    background-color: transparent !important;
    color: #000 !important;
    padding: 0.5em !important;
    border: 1px solid #c9ad6a !important;
    vertical-align: top !important;
}

tr:nth-child(even) td {
    background-color: rgba(255, 245, 220, 0.5) !important;
}

/* Code blocks */
code {
    background-color: rgba(255, 255, 255, 0.8) !important;
    color: #000 !important;
    border: 1px solid #c9ad6a !important;
    padding: 0.2em 0.4em !important;
    border-radius: 3px !important;
    font-family: 'Courier New', monospace !important;
}

pre {
    background-color: rgba(255, 255, 255, 0.9) !important;
    color: #000 !important;
    border: 1px solid #c9ad6a !important;
    padding: 1em !important;
    border-radius: 6px !important;
    margin: 1.5em 0 !important;
    box-shadow: inset 0 2px 4px rgba(0, 0, 0, 0.1) !important;
}

pre code {
    background-color: transparent !important;
    border: none !important;
    padding: 0 !important;
}

/* Links */
a {
    color: #58180D !important;
    text-decoration: underline !important;
    background-color: transparent !important;
}

a:hover {
    color: #c9ad6a !important;
}

/* Special D&D Classes */

/* Spell blocks */
.spell, .ability, .feature {
    background: linear-gradient(135deg, rgba(255, 248, 230, 0.9) 0%, rgba(250, 240, 210, 0.9) 100%) !important;
    border: 2px solid #58180D !important;
    border-radius: 8px !important;
    padding: 1em !important;
    margin: 1.5em 0 !important;
    box-shadow: 0 3px 6px rgba(0, 0, 0, 0.15) !important;
    position: relative !important;
}

.spell::before, .ability::before, .feature::before {
    content: "" !important;
    position: absolute !important;
    top: 0 !important;
    left: 0 !important;
    right: 0 !important;
    height: 4px !important;
    background: linear-gradient(90deg, #58180D, #c9ad6a, #58180D) !important;
    border-radius: 6px 6px 0 0 !important;
}

.spell *, .ability *, .feature * {
    color: #000 !important;
    background-color: transparent !important;
}

.spell-title, .ability-title, .feature-title {
    font-weight: bold !important;
    color: #58180D !important;
    font-size: 1.2em !important;
    margin: 0 0 0.5em 0 !important;
    border-bottom: 1px solid #c9ad6a !important;
    padding-bottom: 0.3em !important;
    background-color: transparent !important;
}

/* Stat blocks */
.stat-block {
    background: linear-gradient(135deg, rgba(255, 240, 220, 0.95) 0%, rgba(245, 230, 200, 0.95) 100%) !important;
    border: 3px solid #58180D !important;
    border-radius: 10px !important;
    padding: 1em !important;
    margin: 1.5em 0 !important;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2) !important;
    position: relative !important;
}

.stat-block::before {
    content: "" !important;
    position: absolute !important;
    top: -3px !important;
    left: -3px !important;
    right: -3px !important;
    height: 8px !important;
    background: linear-gradient(90deg, #c9ad6a, #58180D, #c9ad6a) !important;
    border-radius: 10px 10px 0 0 !important;
}

.stat-block * {
    color: #000 !important;
    background-color: transparent !important;
}

.stat-block h4 {
    text-align: center !important;
    font-size: 1.3em !important;
    margin: 0 0 0.5em 0 !important;
    border-bottom: 2px solid #58180D !important;
    padding-bottom: 0.3em !important;
}

/* Notes and sidebars */
.note {
    background: rgba(255, 252, 240, 0.9) !important;
    border: 1px solid #c9ad6a !important;
    border-radius: 6px !important;
    padding: 0.8em !important;
    margin: 1em 0 !important;
    font-size: 0.95em !important;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1) !important;
}

.note * {
    color: #000 !important;
    background-color: transparent !important;
}

.sidebar {
    background: rgba(245, 240, 225, 0.9) !important;
    border: 2px solid #58180D !important;
    border-radius: 8px !important;
    padding: 1em !important;
    margin: 1em 0 !important;
    box-shadow: 0 3px 6px rgba(0, 0, 0, 0.1) !important;
}

.sidebar * {
    color: #000 !important;
    background-color: transparent !important;
}

/* Drop caps */
.drop-cap::first-letter {
    font-family: Cinzel, serif !important;
    font-size: 4em !important;
    font-weight: bold !important;
    float: left !important;
    line-height: 0.8 !important;
    margin: 0.1em 0.1em 0 0 !important;
    color: #58180D !important;
    text-shadow: 2px 2px 0px rgba(255, 255, 255, 0.5) !important;
}

/* Horizontal rules */
hr {
    border: none !important;
    border-top: 2px solid #c9ad6a !important;
    margin: 2em 0 !important;
    opacity: 0.7 !important;
}

/* Print styles */
@media print {
    body, .app-container, .workspace, .markdown-preview-view {
        background-color: #fdf1dc !important;
        color: #000 !important;
        font-size: 11pt !important;
    }
    
    .no-print {
        display: none !important;
    }
}

/* Mobile responsive */
@media screen and (max-width: 768px) {
    body {
        font-size: 16px !important;
        line-height: 1.7 !important;
    }
    
    .markdown-preview-view {
        padding: 1em !important;
    }
    
    h1 {
        font-size: 1.8em !important;
    }
    
    h2 {
        font-size: 1.4em !important;
    }
    
    h3 {
        font-size: 1.2em !important;
    }
    
    table {
        font-size: 0.9em !important;
    }
    
    .drop-cap::first-letter {
        font-size: 3em !important;
    }
}
